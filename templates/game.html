{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card story-card">
            <div class="card-header">
                <h2 class="text-center mb-0">مغامرة القصص التفاعلية</h2>
                <div class="points-display text-center mt-2">
                    <span class="badge bg-success">النقاط: <span id="points-counter">0</span></span>
                    <span class="badge bg-info mx-2">القرارات: <span id="choices-counter">0</span></span>
                </div>
            </div>
            <div class="card-body">
                <div id="story-container" class="story-text mb-4">
                    <p class="text-center welcome-message">مرحباً بك في عالم القصص التفاعلية! كل قصة هي مغامرة فريدة تنتظر قراراتك. اضغط على زر البدء لتبدأ رحلتك.</p>
                </div>

                <div id="input-container" class="mb-3 d-none">
                    <div class="form-floating mb-3">
                        <textarea id="user-input" class="form-control story-input" 
                                placeholder="اكتب ردك هنا..." 
                                rows="3" dir="rtl"></textarea>
                        <label for="user-input">ما هو قرارك؟</label>
                    </div>
                    <button id="submit-response" class="btn btn-primary btn-lg w-100 mb-2">
                        <i class="fas fa-paper-plane me-2"></i>
                        إرسال قرارك
                    </button>
                </div>

                <div id="start-container" class="text-center">
                    <button id="start-game" class="btn btn-success btn-lg pulse-button">
                        <i class="fas fa-play me-2"></i>
                        ابدأ المغامرة
                    </button>
                </div>

                <div id="new-game-container" class="text-center mt-3 d-none">
                    <button id="new-game" class="btn btn-secondary">
                        <i class="fas fa-sync-alt me-2"></i>
                        قصة جديدة
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Loading Spinner -->
<div id="loading-spinner" class="position-fixed top-50 start-50 translate-middle d-none">
    <div class="spinner-grow text-primary" role="status">
        <span class="visually-hidden">جاري التحميل...</span>
    </div>
</div>

<!-- Error Alert -->
<div id="error-alert" class="alert alert-danger alert-dismissible fade show d-none" role="alert">
    <span id="error-message"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endblock %}

{% block scripts %}
<script src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}